import{_ as N}from"./DNA2yJlg.js";import{f as x,r as l,g as S,j as T,c,o as g,a as s,k as b,b as f,t as _,l as p,v,m as U,d as y,e as $,w as B,p as E,_ as h}from"./BWSXKlgt.js";const M={class:"register-container"},q={key:0,class:"error-message"},L={key:1,class:"success-message"},D={class:"form-group"},F={class:"form-group"},I={class:"form-group"},O={class:"form-group"},j=["disabled"],J={class:"login-link"},z=x({__name:"RegisterForm",setup(A){const u=l(""),o=l(""),r=l(""),i=l(""),a=l(""),d=l(""),m=l(!1),w=S(),{setUser:G}=E();T([u,o,r,i],()=>{a.value&&(a.value="")});const P=async()=>{try{if(a.value="",d.value="",r.value!==i.value){a.value="Passwords do not match";return}if(r.value.length<8){a.value="Password must be at least 8 characters long";return}m.value=!0;const t=await $fetch("/api/register",{method:"POST",body:{name:u.value,email:o.value,password:r.value}});t.success?(d.value=t.message,u.value="",o.value="",r.value="",i.value="",setTimeout(()=>{w.push("/login")},2e3)):a.value=t.message||"Registration failed"}catch(t){console.error("Registration error:",t),a.value="An error occurred during registration"}finally{m.value=!1}},R=t=>{d.value="Google registration successful",G(t),setTimeout(()=>{w.push("/dashboard")},1e3)},V=t=>{console.error("Google registration error:",t)};return(t,e)=>{const k=N,C=$;return g(),c("div",M,[e[10]||(e[10]=s("h2",null,"Create Account",-1)),a.value?(g(),c("div",q,_(a.value),1)):b("",!0),d.value?(g(),c("div",L,_(d.value),1)):b("",!0),s("form",{onSubmit:U(P,["prevent"])},[s("div",D,[e[4]||(e[4]=s("label",{for:"name"},"Name:",-1)),p(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n)},null,512),[[v,u.value]])]),s("div",F,[e[5]||(e[5]=s("label",{for:"email"},"Email:",-1)),p(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n),required:""},null,512),[[v,o.value]])]),s("div",I,[e[6]||(e[6]=s("label",{for:"password"},"Password:",-1)),p(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=n=>r.value=n),required:""},null,512),[[v,r.value]])]),s("div",O,[e[7]||(e[7]=s("label",{for:"confirmPassword"},"Confirm Password:",-1)),p(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=n=>i.value=n),required:""},null,512),[[v,i.value]])]),s("button",{type:"submit",disabled:m.value},_(m.value?"Creating Account...":"Register"),9,j)],32),e[11]||(e[11]=s("div",{class:"separator"},[s("span",null,"OR")],-1)),f(k,{"button-text":"Sign up with Google","auth-type":"register",onGoogleAuthSuccess:R,onGoogleAuthError:V}),s("div",J,[e[9]||(e[9]=y(" Already have an account? ")),f(C,{to:"/login"},{default:B(()=>e[8]||(e[8]=[y("Login")])),_:1,__:[8]})])])}}}),H=h(z,[["__scopeId","data-v-fbb803a4"]]),K={class:"register-page"},Q=x({__name:"register",setup(A){return(u,o)=>{const r=H;return g(),c("div",K,[o[0]||(o[0]=s("h1",null,"Join Nixty",-1)),o[1]||(o[1]=s("p",{class:"subtitle"},"Create your account to get started",-1)),f(r)])}}}),Y=h(Q,[["__scopeId","data-v-2cab41bf"]]);export{Y as default};

import{_ as x,r as u,l as w,j as I,c as n,a as e,t as i,s as _,F as C,y as D,k as A,i as P,o as a,d as F}from"./BxhkHZUn.js";const N={class:"product-page-container"},V={key:0,class:"state-container"},L={key:1,class:"state-container"},T={class:"error-text"},q={key:2,class:"product-content"},B={class:"product-header galaxy-card"},E={class:"product-title galaxy-gradient-text"},R={class:"version-grid"},$={class:"version-header"},M={class:"version-title"},S={key:0,class:"badge new-badge"},j={class:"version-image-container"},H=["src","alt"],W={class:"version-details"},z={class:"version-description"},G={class:"price-section"},J={class:"price-amount"},K={key:0,class:"price-period"},O={class:"version-actions"},Q=["onClick"],U=["onClick"],X={key:0,class:"product-details galaxy-card"},Y=["innerHTML"],Z={__name:"[slug]",setup(ss){const l=A(),h=P(),r=u([]),c=u(null),p=u(!0),d=u(null),g=u(null),m=w(()=>r.value.length===0?"":r.value[0].name.split(" ").slice(0,-1).join(" ")),y=async()=>{const o=l.params.slug;p.value=!0,d.value=null;try{console.log("Fetching products for slug:",o);const s=await $fetch("/api/products/details",{params:{slug:o,productId:l.query.productId}});if(console.log("API Response:",s),s.success&&s.product&&Array.isArray(s.versions))g.value=s.product,r.value=s.versions;else if(s.product&&Array.isArray(s.versions))g.value=s.product,r.value=s.versions;else throw new Error("Invalid product data received");if(l.query.productId){const t=r.value.find(v=>v.id==l.query.productId);t?c.value=t:c.value=r.value[0]}else c.value=r.value[0];console.log("Processed products:",r.value)}catch(s){console.error("Error fetching product:",s),d.value=s.message||"An unexpected error occurred."}finally{p.value=!1}},f=o=>{var s;c.value=o,(s=document.querySelector(".product-details"))==null||s.scrollIntoView({behavior:"smooth"})},b=o=>{const s=o.slug||l.params.slug;h.push(`/product/${s}/checkout`)},k=o=>typeof o!="number"?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o);return I(y),(o,s)=>(a(),n("div",N,[p.value?(a(),n("div",V,s[0]||(s[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading Product...",-1)]))):d.value?(a(),n("div",L,[e("p",T,"❌ "+i(d.value),1),e("button",{onClick:y,class:"galaxy-button-secondary"},"Try Again")])):(a(),n("div",q,[e("div",B,[e("h1",E,i(m.value),1),s[1]||(s[1]=e("p",{class:"product-subtitle"},"Choose the version that suits your needs",-1))]),e("div",R,[(a(!0),n(C,null,D(r.value,t=>(a(),n("div",{key:t.id,class:"version-card galaxy-card"},[e("div",$,[e("h2",M,i(t.version),1),t.is_new?(a(),n("span",S,"NEW")):_("",!0)]),e("div",j,[e("img",{src:t.image_url||"/placeholder-product.png",alt:t.name,class:"version-image"},null,8,H)]),e("div",W,[e("p",z,i(t.short_description),1),e("div",G,[s[2]||(s[2]=e("span",{class:"price-label"},"Price:",-1)),e("span",J,i(k(t.price)),1),t.period?(a(),n("span",K,i(t.period),1)):_("",!0)])]),e("div",O,[e("button",{class:"buy-now-btn galaxy-button-primary",onClick:v=>b(t)},s[3]||(s[3]=[F(" Buy Now "),e("span",{class:"icon"},"➤",-1)]),8,Q),e("button",{class:"details-btn galaxy-button-secondary",onClick:v=>f(t)}," View Details ",8,U)])]))),128))]),c.value?(a(),n("div",X,[s[4]||(s[4]=e("h3",{class:"details-title"},"Product Details",-1)),e("div",{innerHTML:c.value.description,class:"details-content"},null,8,Y)])):_("",!0)]))]))}},ts=x(Z,[["__scopeId","data-v-bdc0ebca"]]);export{ts as default};

import{_ as j,n as q,E as G,G as H,r as u,l as J,j as Q,u as R,c as n,a as s,s as c,b as W,w as X,t as l,d as T,z as m,g as $,F as A,y as O,e as Y,o as i}from"./BxhkHZUn.js";import{u as Z}from"./YVwmBCuj.js";import"./DUhoTqhP.js";const ss={class:"order-detail-page"},es={class:"container"},ts={class:"header-section"},as={key:0,class:"loading-container"},ls={key:1,class:"error-container"},os={key:2,class:"order-details-container"},ns={class:"order-card galaxy-card"},is={class:"order-header"},rs={class:"order-info"},ds={class:"order-date"},cs={key:0,class:"midtrans-order-id"},us={class:"order-content"},_s={class:"section"},vs={class:"detail-grid"},ps={class:"detail-item"},ys={class:"value"},ms={class:"detail-item"},fs={class:"value"},gs={class:"detail-item"},hs={class:"value"},ks={class:"detail-item"},bs={class:"value price"},ws={class:"detail-item"},Cs={class:"value price total"},Ls={key:0,class:"section"},Ps={class:"license-status"},Ns={class:"detail-grid"},xs={class:"detail-item"},Ts={class:"value"},$s={key:0,class:"detail-item"},As={class:"value"},Os={key:1,class:"detail-item"},Us={class:"value"},Ds={key:0,class:"license-details"},Fs={class:"license-key-section"},Is={class:"key-container"},Ks={class:"product-key"},Es=["onClick"],Ss=["onClick"],Bs={key:1,class:"license-details"},Vs={class:"account-section"},Ms={class:"credential-item"},zs={class:"credential-value"},js=["onClick"],qs={class:"credential-item"},Gs={class:"credential-value"},Hs=["onClick"],Js=["onClick"],Qs={key:1,class:"section"},Rs={class:"payment-logs"},Ws={class:"log-key"},Xs={class:"log-value"},Ys={__name:"[id]",setup(Zs){const{user:f,initUser:U}=q(),{formatCurrency:h}=Z(),{success:D,error:F}=G(),k=H().params.id,a=u(null),b=u([]),_=u(!0),d=u(null),v=u({}),p=u({}),w=J(()=>{const t=["midtrans_response","full_response","payment_gateway_payload","order_id"];return b.value.filter(e=>!t.includes(e.key))}),I=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",K=t=>{switch(t){case"completed":return"status-success";case"pending":return"status-warning";case"failed":return"status-error";default:return"status-neutral"}},E=t=>{switch(t){case"completed":return"Completed";case"pending":return"Pending";case"failed":return"Failed";default:return t||"Unknown"}},S=t=>{switch(t){case"product_key":return"Product Key";case"email_password":return"Account Credentials";default:return t}},B=t=>t==="midtrans_order_id"?"Order ID":t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),V=t=>{v.value[t]=!v.value[t]},M=t=>{p.value[t]=!p.value[t]},g=async t=>{try{await navigator.clipboard.writeText(t),D("Copied to clipboard!")}catch{F("Failed to copy to clipboard")}},C=async()=>{if(!f.value){d.value="Please log in to view order details",_.value=!1;return}try{_.value=!0,d.value=null;const t=await $fetch(`/api/orders/${k}`,{headers:{"x-user-session":JSON.stringify(f.value)}});t.success?(a.value=t.order,b.value=t.paymentLogs||[]):d.value=t.message||"Failed to load order details"}catch(t){console.error("Error fetching order details:",t),d.value=t.message||"Failed to load order details"}finally{_.value=!1}};return Q(async()=>{await U(),f.value?await C():(d.value="Please log in to view order details",_.value=!1)}),R({title:`Order #${k}`}),(t,e)=>{var L,P,N,x;const z=Y;return i(),n("div",ss,[s("div",es,[s("div",ts,[W(z,{to:"/orders",class:"back-btn"},{default:X(()=>e[0]||(e[0]=[s("i",{class:"fas fa-arrow-left"},null,-1),T(" Back to Orders ")])),_:1,__:[0]})]),_.value?(i(),n("div",as,e[1]||(e[1]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading order details...",-1)]))):d.value?(i(),n("div",ls,[e[2]||(e[2]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),s("p",null,l(d.value),1),s("button",{onClick:C,class:"galaxy-button-primary"},"Try Again")])):a.value?(i(),n("div",os,[s("div",ns,[s("div",is,[s("div",rs,[s("h2",null,"Order #"+l(a.value.order_id||a.value.id),1),s("p",ds,l(I(a.value.created_at)),1),a.value.status==="failed"&&a.value.midtrans_order_id?(i(),n("p",cs,[e[3]||(e[3]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),T(" Midtrans Order: "+l(a.value.midtrans_order_id),1)])):c("",!0)]),s("div",{class:m(["status-badge",K(a.value.status)])},l(E(a.value.status)),3)]),s("div",us,[s("div",_s,[e[9]||(e[9]=s("h3",null,"Product Information",-1)),s("div",vs,[s("div",ps,[e[4]||(e[4]=s("span",{class:"label"},"Product:",-1)),s("span",ys,l(((L=a.value.product)==null?void 0:L.name)||"N/A"),1)]),s("div",ms,[e[5]||(e[5]=s("span",{class:"label"},"Category:",-1)),s("span",fs,l(((N=(P=a.value.product)==null?void 0:P.category)==null?void 0:N.name)||"N/A"),1)]),s("div",gs,[e[6]||(e[6]=s("span",{class:"label"},"Quantity:",-1)),s("span",hs,l(a.value.quantity),1)]),s("div",ks,[e[7]||(e[7]=s("span",{class:"label"},"Unit Price:",-1)),s("span",bs,l($(h)(((x=a.value.product)==null?void 0:x.price)||0)),1)]),s("div",ws,[e[8]||(e[8]=s("span",{class:"label"},"Total:",-1)),s("span",Cs,l($(h)(a.value.total)),1)])])]),a.value.licenses&&a.value.licenses.length>0?(i(),n("div",Ls,[s("h3",null,"License Information ("+l(a.value.licenses.length)+" License"+l(a.value.licenses.length>1?"s":"")+")",1),(i(!0),n(A,null,O(a.value.licenses,(o,r)=>(i(),n("div",{key:r,class:m(["license-card",{"multiple-license":a.value.licenses.length>1}])},[s("div",Ps,[e[10]||(e[10]=s("i",{class:"fas fa-key"},null,-1)),s("span",null,"License "+l(r+1)+l(a.value.licenses.length>1?` of ${a.value.licenses.length}`:""),1)]),s("div",Ns,[s("div",xs,[e[11]||(e[11]=s("span",{class:"label"},"License Type:",-1)),s("span",Ts,l(S(o.license_type)),1)]),o.max_usage>1?(i(),n("div",$s,[e[12]||(e[12]=s("span",{class:"label"},"Max Usage:",-1)),s("span",As,l(o.max_usage),1)])):c("",!0),o.notes?(i(),n("div",Os,[e[13]||(e[13]=s("span",{class:"label"},"Notes:",-1)),s("span",Us,l(o.notes),1)])):c("",!0)]),o.license_type==="product_key"&&o.product_key?(i(),n("div",Ds,[s("div",Fs,[e[15]||(e[15]=s("h4",null,"Product Key",-1)),s("div",Is,[s("code",Ks,l(v.value[r]?o.product_key:"•".repeat(o.product_key.length)),1),s("button",{onClick:y=>V(r),class:"toggle-key-btn"},[s("i",{class:m(v.value[r]?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,Es),s("button",{onClick:y=>g(o.product_key),class:"copy-btn"},e[14]||(e[14]=[s("i",{class:"fas fa-copy"},null,-1)]),8,Ss)])])])):o.license_type==="email_password"&&o.account?(i(),n("div",Bs,[s("div",Vs,[e[20]||(e[20]=s("h4",null,"Account Credentials",-1)),s("div",Ms,[e[17]||(e[17]=s("span",{class:"label"},"Email:",-1)),s("div",zs,[s("code",null,l(o.account.email),1),s("button",{onClick:y=>g(o.account.email),class:"copy-btn"},e[16]||(e[16]=[s("i",{class:"fas fa-copy"},null,-1)]),8,js)])]),s("div",qs,[e[19]||(e[19]=s("span",{class:"label"},"Password:",-1)),s("div",Gs,[s("code",null,l(p.value[r]?o.account.password:"•".repeat(o.account.password.length)),1),s("button",{onClick:y=>M(r),class:"toggle-key-btn"},[s("i",{class:m(p.value[r]?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,Hs),s("button",{onClick:y=>g(o.account.password),class:"copy-btn"},e[18]||(e[18]=[s("i",{class:"fas fa-copy"},null,-1)]),8,Js)])])])])):c("",!0)],2))),128))])):c("",!0),w.value.length>0?(i(),n("div",Qs,[e[21]||(e[21]=s("h3",null,"Payment Information",-1)),s("div",Rs,[(i(!0),n(A,null,O(w.value,o=>(i(),n("div",{key:o.id,class:"log-item"},[s("span",Ws,l(B(o.key))+":",1),s("span",Xs,l(o.value),1)]))),128))])])):c("",!0)])])])):c("",!0)])])}}},le=j(Ys,[["__scopeId","data-v-9081afd7"]]);export{le as default};

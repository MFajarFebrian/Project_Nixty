import{_ as m,r as v,i as h,l as f,c,o as s,a as t,s as g,t as l,u as k,j as P,g as y,F as $,y as I,v as C}from"./BxhkHZUn.js";const b={class:"product-image-wrapper"},x=["src","alt"],N={class:"product-badges"},w={key:0,class:"badge active-badge"},B={class:"product-info"},D=["title"],E={class:"product-meta"},F={key:0,class:"product-category"},A={key:1,class:"product-version"},L={class:"product-pricing"},R={class:"price-container"},V={key:0,class:"original-price"},j={class:"current-price"},M={__name:"ProductCard",props:{product:{type:Object,required:!0,default:()=>({name:"",price:0,image_url:""})}},setup(o){const e=o,d=v(e.product.image_url||"/placeholder-grey.svg"),u=h(),i=()=>{d.value="/placeholder-grey.svg"},p=f(()=>e.product.name+(e.product.version?` ${e.product.version}`:"")),a=()=>{if(console.log("ProductCard clicked! Product data:",e.product),console.log("Category slug:",e.product.category_slug),console.log("Product ID:",e.product.id),e.product.id){const _=`/checkout?slug=${e.product.category_slug||e.product.slug||""}&productId=${e.product.id}`;console.log("Navigating to:",_),u.push(_)}else console.error("Missing ID for product:",e.product)},r=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n);return(n,_)=>(s(),c("div",{class:"product-card",onClick:a},[t("div",b,[t("img",{src:d.value,alt:o.product.name,class:"product-image",loading:"lazy",onError:i},null,40,x),t("div",N,[o.product.status==="active"?(s(),c("span",w,"ACTIVE")):g("",!0)])]),t("div",B,[t("h3",{class:"product-title",title:p.value},l(p.value),9,D),t("div",E,[o.product.category_name||o.product.category?(s(),c("span",F,l(o.product.category_name||o.product.category),1)):g("",!0),o.product.version?(s(),c("span",A,"v"+l(o.product.version),1)):g("",!0)]),t("div",L,[t("div",R,[o.product.discount_percentage?(s(),c("span",V,l(r(o.product.price)),1)):g("",!0),t("span",j,l(r(o.product.discount_price||o.product.price)),1)])])])]))}},T=m(M,[["__scopeId","data-v-8d7a58ab"]]),q={class:"products-page"},z={key:0,class:"state-container"},H={key:1,class:"state-container"},O={class:"error-text"},S={key:2,class:"state-container"},U={key:3,class:"products-grid"},G={__name:"products",setup(o){const e=v([]),d=v(!0),u=v(null),i=e,p=async()=>{d.value=!0,u.value=null;try{const a=await $fetch("/api/products");console.log("Products response:",a),e.value=a.products||[]}catch(a){u.value="Failed to load products. Please try again later.",console.error("Error fetching products:",a)}finally{d.value=!1}};return k({title:"Products"}),P(p),(a,r)=>(s(),c("div",q,[r[2]||(r[2]=t("div",{class:"page-header"},[t("h1",{class:"page-title galaxy-gradient-text"},"All Products"),t("p",{class:"page-subtitle"},"Browse our complete collection of software solutions.")],-1)),d.value?(s(),c("div",z,r[0]||(r[0]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading Products...",-1)]))):u.value?(s(),c("div",H,[t("p",O,"❌ "+l(u.value),1)])):y(i).length===0?(s(),c("div",S,r[1]||(r[1]=[t("p",null,"No products found.",-1)]))):(s(),c("div",U,[(s(!0),c($,null,I(y(i),n=>(s(),C(T,{key:n.id,product:n},null,8,["product"]))),128))]))]))}},K=m(G,[["__scopeId","data-v-a99a8e4c"]]);export{K as default};
